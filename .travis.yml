language: node_js
dist: bionic
node_js:
    - '12'
before_install:
    - curl -L https://yarnpkg.com/install.sh | bash -s -- --version 1.22.0
    - export PATH="$HOME/.yarn/bin:$PATH"
    - pyenv global 3.8
cache:
    yarn: true
install:
    - yarn
script:
    - make test
deploy:
    provider: npm
    email: opensource@yelp.com
    api_key:
        # this is already encrypted, see https://docs.travis-ci.com/user/deployment/npm/#npm-auth-token
        secure: kImaLZnn8re2P9SaT5/2rAGOwQwh9vXSIb5N9AFx3OMrDDd6uenwhSid1yvUzleVLmGn+HMo3TDc0QP1+lfLChGweSGQ6eCpvzz2aC/EfGruCZbO35lsG0DzFINQmmeIuwzNESHdgxpPNjnI5vF+76O01VSP5ZGhD6xke5uDXb0QgV9msJq8a1EVmmZSHxse3bGz0bCpq5zdDD0L0f0W2JmBz6R5ft9c/Zm7iOjzLeZ5TihS7uQseCKcTr9bOLLm9w0aK30M/Ku5LNXo8iCP5+zJhEo6sK7BQzsTU96qXvc4GyL4NsJllqkYJpkio4D7yzEvOQ7vVK69Jrz7/vi5a+Q3rP4CNlVTkF0PzeTNq1A2FJjMH+kajo7HE9tmSwpVrgWrwgI9NN5WqGEuXEvj1rhXtHZV4gvtZax2pUGwmXkI45N1722rPa0Cj/uVHNdQfzBYysq/jHc1yJ/EeiC8gi4u5WXXHTLFQk9SPXWaUFKOANzLLLGMSfOh4w6krTBDI9Q8L4jrYaS8SIOJt0gxbKxn5L42VjyMGoFVwr55XG2x/PXAMWuvYCCRi/XaCidycCnfkKvrTsQwjeFCLJTx0+Fm8UEpyjvOaiIOen5hwkXGn6uPx1kvFnTGgrJBBltkmWye+RJtXXBRO8jAliJk/N4UCTgQK0To1NBDLFe4kBs= # pragma: allowlist secret
    on:
        branch: master
        tags: true
        repo: Yelp/dataloader-codegen
